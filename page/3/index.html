<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-128479674-2', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


  
  <title>Kai ｜ 凯</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Kai ｜ 凯">
<meta property="og:url" content="https://kaichu.se/page/3/index.html">
<meta property="og:site_name" content="Kai ｜ 凯">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Kai Chu">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Kai ｜ 凯" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Kai ｜ 凯</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://kaichu.se"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-scripts-to-backup-rancher" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Rancher/2019/12/17/scripts-to-backup-rancher.html" class="article-date">
  <time datetime="2019-12-17T16:28:39.000Z" itemprop="datePublished">2019-12-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Rancher/">Rancher</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Rancher/2019/12/17/scripts-to-backup-rancher.html">Scripts to backup your rancher container</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Following <a target="_blank" rel="noopener" href="https://rancher.com/docs/rancher/v2.x/en/backups/backups/single-node-backups/">rancher official website</a>,I have created a script to backup. It will stop rancher, backup with busy_box to current working dir and then restart the container again.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.&#x2F;backup_rancher.sh rancher&#x2F;rancher:v2.3.2</span><br></pre></td></tr></table></figure>
<p>The parameter rancher/rancher:v2.3.2 is depending on value on the field of IMAGE in your $docker ps </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                    COMMAND            ...</span><br><span class="line">b9ad26b8ece5        rancher&#x2F;rancher:v2.3.2   &quot;entrypoint.sh&quot;    ...</span><br></pre></td></tr></table></figure>

<p>// backup_rancher.sh</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash </span><br><span class="line">set -u</span><br><span class="line">set -e </span><br><span class="line"></span><br><span class="line">function backup() &#123;</span><br><span class="line">  rancher_image&#x3D;$1</span><br><span class="line">  rancher_container_name&#x3D;$2</span><br><span class="line">  rancher_container_tag&#x3D;$3</span><br><span class="line">  rancher_backup_date&#x3D;&quot;$(date &#39;+%Y-%m-%d-%H-%M-%S&#39;)&quot;</span><br><span class="line"></span><br><span class="line">  rancher_backup_container_name&#x3D;&quot;rancher-data-$rancher_backup_date&quot;</span><br><span class="line">  rancher_backup_filename&#x3D;&quot;rancher-data-backup-$rancher_container_tag-$rancher_backup_date.tar.gz&quot;</span><br><span class="line"></span><br><span class="line">  echo &quot;...Stoping target rancher container $rancher_container_name&quot;</span><br><span class="line">  docker stop &quot;$rancher_container_name&quot;</span><br><span class="line">  </span><br><span class="line">  echo &quot;...Creating util container and starting backup&quot;</span><br><span class="line">  docker create --volumes-from &quot;$rancher_container_name&quot; --name &quot;$rancher_backup_container_name&quot; &quot;$rancher_image&quot;</span><br><span class="line">  docker run --volumes-from &quot;$rancher_backup_container_name&quot; -v &quot;&#x2F;$PWD&quot;:&#x2F;&#x2F;backup:z &quot;$docker_repository&#x2F;busybox&quot; tar zcvf &#x2F;&#x2F;backup&#x2F;$rancher_backup_filename &#x2F;&#x2F;var&#x2F;lib&#x2F;rancher</span><br><span class="line">  </span><br><span class="line">  echo &quot;...Removing backup util container $rancher_backup_container_name&quot;</span><br><span class="line">  docker rm -f &quot;$rancher_backup_container_name&quot; </span><br><span class="line">  </span><br><span class="line">  echo &quot;...Restarting target rancher container $rancher_container_name&quot;</span><br><span class="line">  docker start &quot;$rancher_container_name&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function main() &#123;</span><br><span class="line">  ancestor_filter&#x3D;$1</span><br><span class="line">  </span><br><span class="line">  for rancher in $(docker ps --filter status&#x3D;running --filter ancestor&#x3D;$ancestor_filter --format &#39;&#123;&#123;.Image&#125;&#125;|&#123;&#123;.Names&#125;&#125;&#39;) </span><br><span class="line">  do</span><br><span class="line">    echo &quot;Found running rancher container $rancher&quot;</span><br><span class="line">    IFS&#x3D;&#39;|&#39; read -ra rancherArr &lt;&lt;&lt; $rancher</span><br><span class="line">    IFS&#x3D;&#39; &#39; </span><br><span class="line">    docker_image&#x3D;&quot;$&#123;rancherArr[0]&#125;&quot;</span><br><span class="line">    docker_names&#x3D;&quot;$&#123;rancherArr[1]&#125;&quot;</span><br><span class="line">    </span><br><span class="line">    echo &quot;...Resolving docker image tag from $docker_image&quot;</span><br><span class="line">    docker_image_tag&#x3D;&#39;latest&#39;</span><br><span class="line">    docker_image_repository&#x3D;&quot;$&#123;docker_image&#125;&quot;</span><br><span class="line">    if [[ &quot;$&#123;docker_image&#125;&quot; &#x3D;~ ^(.*):(.*) ]] </span><br><span class="line">    then </span><br><span class="line">      docker_image_repository&#x3D;&quot;$&#123;BASH_REMATCH[1]&#125;&quot;</span><br><span class="line">      docker_image_tag&#x3D;&quot;$&#123;BASH_REMATCH[2]&#125;&quot;</span><br><span class="line">      echo &quot;Resolved image repository: $docker_image_repository, tag: $docker_image_tag&quot;</span><br><span class="line">    else </span><br><span class="line">      echo &quot;No match tag found, use default tag $docker_image_tag&quot;</span><br><span class="line">    fi</span><br><span class="line">    backup $docker_image $docker_names $docker_image_tag</span><br><span class="line">  done</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Change to your proxy registry if you are behind a proxy</span><br><span class="line">docker_repository&#x3D;&quot;registry.hub.docker.com&#x2F;library&quot;</span><br><span class="line"></span><br><span class="line">main &quot;$@&quot;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kaichu.se/Rancher/2019/12/17/scripts-to-backup-rancher.html" data-id="ckuelnhox000bexojarkddvbi" class="article-share-link">Share</a>
      
        <a href="https://kaichu.se/Rancher/2019/12/17/scripts-to-backup-rancher.html#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/backup/" rel="tag">backup</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cloud/" rel="tag">cloud</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rancher/" rel="tag">rancher</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-a-story-and-a-piece-of-code-to-understand-nodejs-event-loop" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Nodejs/2019/11/29/a-story-and-a-piece-of-code-to-understand-nodejs-event-loop.html" class="article-date">
  <time datetime="2019-11-29T15:00:54.000Z" itemprop="datePublished">2019-11-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Nodejs/">Nodejs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Nodejs/2019/11/29/a-story-and-a-piece-of-code-to-understand-nodejs-event-loop.html">A story and a piece of code to understand nodejs event loop</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="A-story"><a href="#A-story" class="headerlink" title="A story"></a>A story</h1><p>Imagine the code you want to run is a king and node is the army of servants.<br>The day starts by one servant waking up the king and asking him if he needs anything. The king gives the servant a list of tasks and goes back to sleep a little longer. The servant now distributes those tasks among his colleagues and they get to work.<br>Once a servant finishes a task, he lines up outside the kings quarter to report. The king lets one servant in at a time, and listens to things he reports. Sometimes the king will give the servant more tasks on the way out.<br>Life is good, for the king’s servants carry out all of his tasks in parallel, but only report with one result at a time, so the king can focus.</p>
<h1 id="Callback-programming-model-in-nodejs"><a href="#Callback-programming-model-in-nodejs" class="headerlink" title="Callback programming model in nodejs"></a>Callback programming model in nodejs</h1><p>Request an action and register a callback which will be called when the action has been done.<br>The first request is from node main.js, </p>
<ol>
<li>all function calls will be done in the current phase</li>
<li>any async function call (await on async, async.then) will register a callback in the pending callbacks queue</li>
<li>any timer will be registered in the timers queue</li>
<li>any I/O events from OS level will be listened in poll phases, (timeout and count limitation) </li>
<li>any setImmediate will be run in check, right after next event loop</li>
<li>any close callbacks </li>
<li>checks if it is waiting for any asynchronous I/O or timers and shuts down cleanly if there are not any</li>
<li>nextTickQueue will be processed after the current operation is completed, regardless of the current phase of the event loop</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   ┌───────────────────────────┐</span><br><span class="line">┌─&gt;│           timers          │</span><br><span class="line">│  └─────────────┬─────────────┘</span><br><span class="line">│  ┌─────────────┴─────────────┐</span><br><span class="line">│  │     pending callbacks     │</span><br><span class="line">│  └─────────────┬─────────────┘</span><br><span class="line">│  ┌─────────────┴─────────────┐</span><br><span class="line">│  │       idle, prepare       │</span><br><span class="line">│  └─────────────┬─────────────┘      ┌───────────────┐</span><br><span class="line">│  ┌─────────────┴─────────────┐      │   incoming:   │</span><br><span class="line">│  │           poll            │&lt;─────┤  connections, │</span><br><span class="line">│  └─────────────┬─────────────┘      │   data, etc.  │</span><br><span class="line">│  ┌─────────────┴─────────────┐      └───────────────┘</span><br><span class="line">│  │           check           │</span><br><span class="line">│  └─────────────┬─────────────┘</span><br><span class="line">│  ┌─────────────┴─────────────┐</span><br><span class="line">└──┤      close callbacks      │</span><br><span class="line">   └───────────────────────────┘</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="nextTick-setImmediate-and-setTimeout"><a href="#nextTick-setImmediate-and-setTimeout" class="headerlink" title="nextTick, setImmediate and setTimeout"></a>nextTick, setImmediate and setTimeout</h1><p>A function passed to process.nextTick() is going to be executed on the current iteration of the event loop, after the current operation ends.<br>Any function passed as the setImmediate() argument is a callback that’s executed in the next iteration of the event loop.<br>Any function passed as the setTimeout() argument is a callback that’s executed in the next iteration of the event loop if the time duration has been met</p>
<h1 id="Show-me-the-code"><a href="#Show-me-the-code" class="headerlink" title="Show me the code"></a>Show me the code</h1><p>I create a js file and show u how it works. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">async function bunchWorkAsync() &#123;</span><br><span class="line">    for (let x &#x3D; 0; x &lt; 20; x++) &#123;</span><br><span class="line">        setImmediate(() &#x3D;&gt; console.log(&quot;set immediate&quot; + x));</span><br><span class="line">        setTimeout(() &#x3D;&gt; console.log(&quot;set timeout&quot; + x), 0);</span><br><span class="line">        new Promise((resolve, reject) &#x3D;&gt; &#123; console.log(&#39;current phase&#39;); resolve(&#39;promise callback &#39; + x) &#125;).then(v &#x3D;&gt; console.log(v)).catch(r &#x3D;&gt; console.log(r));</span><br><span class="line">        process.nextTick(() &#x3D;&gt; &#123; console.log(&quot;set nexttick&quot; + x) &#125;);</span><br><span class="line">        console.log(&#39;register &#39; + x)</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(&#39;current phase is started &gt;&gt;&gt;&gt;&gt;&gt; &#39;); </span><br><span class="line">bunchWorkAsync().then(v &#x3D;&gt; console.log(v+ &#39; is resolved in the end of callback queue&#39;));</span><br><span class="line">setImmediate(() &#x3D;&gt; console.log(&quot;set immediate in the end&quot;));</span><br><span class="line">console.log(&#39;current phase is done &gt;&gt;&gt;&gt;&gt;&gt; &#39;);</span><br></pre></td></tr></table></figure>
<p>when I run the js file, event loop starts to work with my current function(node file.js will run all sync and async functions and register all async callbacks in some queues)<br>So the running sequence will be explained as following:</p>
<ol>
<li>console.log<br>console.log(‘current phase is started &gt;&gt;&gt;&gt;&gt;&gt; ‘); </li>
<li>bunchWorkAsync()<br>we go into the loop,</li>
<li>1 setImmediate(() =&gt; console.log(“set immediate” + x));<br>we register a callback in the check phase in next event loop</li>
<li>2 setTimeout(() =&gt; console.log(“set timeout” + x), 0);<br>we register a callback in the timers in next event loop</li>
<li>3 new Promise((resolve, reject) …)<br>Run console.log(‘current phase’)<br>we register a callback by Promise(same as a async function) in the callback phase</li>
<li>4  process.nextTick(() =&gt; { console.log(“set nexttick” + x) });<br>we register a callback right after the current operation is done, should be run in current event loop</li>
<li>5 console.log(‘register ‘ + x)<br>we run the log in current phase</li>
<li>6 return 0, since we run the bunchWorkAsync with callback<br>we register a callback in next event loop </li>
<li>setImmediate(() =&gt; console.log(“set immediate in the end”));<br>we add a callback in the check phase in next event loop</li>
<li>console.log(‘current phase is done &gt;&gt;&gt;&gt;&gt;&gt; ‘);<br>we run the command in current operation</li>
</ol>
<p>Then we can think everything in the event loop as following<br>Current loop</p>
<ol>
<li>current operation<br>running all command</li>
<li>next tick queue<br>20 callbacks setup by process.nextTick(() =&gt; { console.log(“set nexttick” + x) });</li>
</ol>
<p>Next event loop</p>
<ol>
<li>timers queue<br>20 callbacks setup by setTimeout()</li>
<li>pending callbacks queue<br>20 callbacks setup by new Promise().then()<br>1 callback setup by bunchWorkAsync().then()</li>
<li>check<br>20 callbacks setup by setImmediate()<br>1 callback setup by setImmediate(() =&gt; console.log(“set immediate in the end”));</li>
</ol>
<p>So in theory, in the end, you should expect the running sequence as following<br>1 current phase output<br>current phase is started &gt;&gt;&gt;&gt;&gt;&gt;<br>20 times ‘current phase’<br>20 times ‘register ‘ + x<br>current phase is done &gt;&gt;&gt;&gt;&gt;&gt;<br>2. nextTick<br>20 times ‘set nexttick’ + x<br>3. timers<br>queues stay<br>4. callbacks queue<br>20 times ‘promise callback’<br>v+ ‘ is resolved in the end of callback queue’<br>5. poll<br>hi OS, I tell u to print my logs, it takes 20ms;<br>OS said yes. it takes 2ms to get the message into node. (I think callback run in libuv?)<br>after 22ms …<br>Oh yeah, I need to check with timers, they may ask to do something now<br>Of course,<br>20 times ‘set timeout’ is in the queue for a while<br>jump into timers tasks</p>
<ol start="5">
<li>check phase<br>20 times ‘set immediate’<br>set immediate in the end</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">$ node examples&#x2F;event-loop.js</span><br><span class="line">current phase is started &gt;&gt;&gt;&gt;&gt;&gt;</span><br><span class="line">current phase</span><br><span class="line">register 0</span><br><span class="line">current phase</span><br><span class="line">register 1</span><br><span class="line">current phase</span><br><span class="line">register 2</span><br><span class="line">current phase</span><br><span class="line">register 3</span><br><span class="line">current phase</span><br><span class="line">register 4</span><br><span class="line">current phase</span><br><span class="line">register 5</span><br><span class="line">current phase</span><br><span class="line">register 6</span><br><span class="line">current phase</span><br><span class="line">register 7</span><br><span class="line">current phase</span><br><span class="line">register 8</span><br><span class="line">current phase</span><br><span class="line">register 9</span><br><span class="line">current phase</span><br><span class="line">register 10</span><br><span class="line">current phase</span><br><span class="line">register 11</span><br><span class="line">current phase</span><br><span class="line">register 12</span><br><span class="line">current phase</span><br><span class="line">register 13</span><br><span class="line">current phase</span><br><span class="line">register 14</span><br><span class="line">current phase</span><br><span class="line">register 15</span><br><span class="line">current phase</span><br><span class="line">register 16</span><br><span class="line">current phase</span><br><span class="line">register 17</span><br><span class="line">current phase</span><br><span class="line">register 18</span><br><span class="line">current phase</span><br><span class="line">register 19</span><br><span class="line">current phase is done &gt;&gt;&gt;&gt;&gt;&gt;</span><br><span class="line">set nexttick0</span><br><span class="line">set nexttick1</span><br><span class="line">set nexttick2</span><br><span class="line">set nexttick3</span><br><span class="line">set nexttick4</span><br><span class="line">set nexttick5</span><br><span class="line">set nexttick6</span><br><span class="line">set nexttick7</span><br><span class="line">set nexttick8</span><br><span class="line">set nexttick9</span><br><span class="line">set nexttick10</span><br><span class="line">set nexttick11</span><br><span class="line">set nexttick12</span><br><span class="line">set nexttick13</span><br><span class="line">set nexttick14</span><br><span class="line">set nexttick15</span><br><span class="line">set nexttick16</span><br><span class="line">set nexttick17</span><br><span class="line">set nexttick18</span><br><span class="line">set nexttick19</span><br><span class="line">promise callback 0</span><br><span class="line">promise callback 1</span><br><span class="line">promise callback 2</span><br><span class="line">promise callback 3</span><br><span class="line">promise callback 4</span><br><span class="line">promise callback 5</span><br><span class="line">promise callback 6</span><br><span class="line">promise callback 7</span><br><span class="line">promise callback 8</span><br><span class="line">promise callback 9</span><br><span class="line">promise callback 10</span><br><span class="line">promise callback 11</span><br><span class="line">promise callback 12</span><br><span class="line">promise callback 13</span><br><span class="line">promise callback 14</span><br><span class="line">promise callback 15</span><br><span class="line">promise callback 16</span><br><span class="line">promise callback 17</span><br><span class="line">promise callback 18</span><br><span class="line">promise callback 19</span><br><span class="line">0 is resolved in the end of callback queue</span><br><span class="line">set timeout0</span><br><span class="line">set timeout1</span><br><span class="line">set timeout2</span><br><span class="line">set timeout3</span><br><span class="line">set timeout4</span><br><span class="line">set timeout5</span><br><span class="line">set timeout6</span><br><span class="line">set timeout7</span><br><span class="line">set timeout8</span><br><span class="line">set timeout9</span><br><span class="line">set timeout10</span><br><span class="line">set timeout11</span><br><span class="line">set timeout12</span><br><span class="line">set timeout13</span><br><span class="line">set timeout14</span><br><span class="line">set timeout15</span><br><span class="line">set timeout16</span><br><span class="line">set timeout17</span><br><span class="line">set timeout18</span><br><span class="line">set timeout19</span><br><span class="line">set immediate0</span><br><span class="line">set immediate1</span><br><span class="line">set immediate2</span><br><span class="line">set immediate3</span><br><span class="line">set immediate4</span><br><span class="line">set immediate5</span><br><span class="line">set immediate6</span><br><span class="line">set immediate7</span><br><span class="line">set immediate8</span><br><span class="line">set immediate9</span><br><span class="line">set immediate10</span><br><span class="line">set immediate11</span><br><span class="line">set immediate12</span><br><span class="line">set immediate13</span><br><span class="line">set immediate14</span><br><span class="line">set immediate15</span><br><span class="line">set immediate16</span><br><span class="line">set immediate17</span><br><span class="line">set immediate18</span><br><span class="line">set immediate19</span><br><span class="line">set immediate in the end</span><br></pre></td></tr></table></figure>

<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul>
<li><a target="_blank" rel="noopener" href="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick">nodejs event loop</a> </li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/45566463/node-js-event-loop-understanding-with-a-diagram">a storty</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kaichu.se/Nodejs/2019/11/29/a-story-and-a-piece-of-code-to-understand-nodejs-event-loop.html" data-id="ckuelnhow000aexojfphob5ew" class="article-share-link">Share</a>
      
        <a href="https://kaichu.se/Nodejs/2019/11/29/a-story-and-a-piece-of-code-to-understand-nodejs-event-loop.html#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Promise/" rel="tag">Promise</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/event-loop/" rel="tag">event loop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/setImmediate/" rel="tag">setImmediate</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/setTimeout/" rel="tag">setTimeout</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-something-in-mind-when-creating-web-pages" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Web/2019/10/22/something-in-mind-when-creating-web-pages.html" class="article-date">
  <time datetime="2019-10-22T15:32:10.000Z" itemprop="datePublished">2019-10-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web/">Web</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Web/2019/10/22/something-in-mind-when-creating-web-pages.html">Something in mind when creating web pages</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I’ve never worked as a web frontend developer in any company, however I have to work with it with my own project all the time. </p>
<blockquote>
<p>It’s so interesting when I try to search html editor that dreamweaver hasn’t been an option any more in most of the blogs. In 2009, when I learnt html tags, I thought everyone would use it in the future.</p>
</blockquote>
<p>Anyway, it always helps to keep html definition in mind.</p>
<blockquote>
<p>HTML is the standard markup language for documents designed to be displayed in a web browser. It can be assisted by technologies such as Cascading Style Sheets (CSS) and scripting languages such as JavaScript. Web browser receive html documents from a web browser.</p>
</blockquote>
<p>Nowadays, it seems the sauce is better than the fish. JavaScript and CSS are taking more responsibilities than html itself, e.g. popular frameworks reactjs or angularjs. </p>
<p>I try to think about different ways of how a html page can be created and served. This is a simple <img src="/assets/SSRandCSR.png" alt="overview"></p>
<p>Initially in (1), html pages are static and be served from web server directly. Smart developers start to use template in the webserver and make it a lit bit reusable.</p>
<p>JavaScript is introduced in (2) to make web pages with animations or doing ajax request to render part of pages. It’s a big applause if u can submit a post request and update a page without refreshing the whole pages. Dynamically adding html elements with piece of data using jQuery in the browser is popular. Html still accounts for larger proportion of a project, I would say. Server template engine is heavily used to generate html pages with data.</p>
<p>JavaScript is dominant in (3), putting piece of data with js to be rendered is dissatisfied. JS developers create compelling frameworks which can render all data which is required by a page and replace template engine such as <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/JavaServer_Pages">JSP</a>. A index html page is sent to a client browser with a bundle of js files. When all files are fetched, browser will be ready to show a page as a <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Single-page_application">Single-page Application(SPA)</a>. Data will be fetched and rendered when the user interacts. When I start to use ReactJS, I think it definitly belongs to this phase especially be using with nodejs app. It requires a client to have good network connection to do all the requests to different servers.</p>
<p>Empty pages or slow client loading, SEO rendering. Problems exist in phase (3) when it comes to those questions. Client has to wait for loading the who SPA in the first access. A blend solution of (2) and (3) which is called <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Isomorphic_JavaScript">Isomorphic Web Application</a>, an isomorphic app is a web app that blends a server-rendered web app with a single-page application. Someone defined it as codes can be run in both client and server side. I prefer to defined as a SPA with the feature that its first html page can be rendered in server side.<br>When server receives a page request, it shall request data by itself, render a page and send it to client, subsequent client request will be handled by the client it self as a SPA. </p>
<p>Good posts to explain Single Page Application and Isomorphic Web Application</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://www.toptal.com/front-end/client-side-vs-server-side-pre-rendering">Toptal.com: client side vs server sdie pre rendering</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://medium.com/@ElyseKoGo/an-introduction-to-isomorphic-web-application-architecture-a8c81c42f59">Medium ElyseKoGo</a></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kaichu.se/Web/2019/10/22/something-in-mind-when-creating-web-pages.html" data-id="ckuelnhot0007exoj8owl0c8x" class="article-share-link">Share</a>
      
        <a href="https://kaichu.se/Web/2019/10/22/something-in-mind-when-creating-web-pages.html#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Isomorphic/" rel="tag">Isomorphic</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SPA/" rel="tag">SPA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/frontend/" rel="tag">frontend</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html/" rel="tag">html</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-concepts-before-starting-to-use-reactjs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Reactjs/2019/10/17/concepts-before-starting-to-use-reactjs.html" class="article-date">
  <time datetime="2019-10-17T14:06:12.000Z" itemprop="datePublished">2019-10-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Reactjs/">Reactjs</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Reactjs/2019/10/17/concepts-before-starting-to-use-reactjs.html">Concepts before starting to use reactjs</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="What-is-React-JS"><a href="#What-is-React-JS" class="headerlink" title="What is React JS"></a>What is React JS</h1><p>ReactJs is an javascript library for building interactive web user interfaces. It provides a framework for frontend developers to divide their web pages into different reusable components.</p>
<p>Back to the old days, we have html static page(or use template engine to create) to be served from an webserver, through http everyone having internet can access the content by using an browser. </p>
<p>Javascript gives the posibilities for web page developers to add more dynamic parts on a page, such as showing windows, showing dynamic content to html dom and sending ajax request to get extra data without refreshing whole pages.</p>
<p>As more and more contents and interactions grow, web pages become more complex. A lot of software developments will end up with a common question, how to reuse codes instead of copy/paste? In web page development, the question is how to break a page into different part so that we can reuse some of them in different projects.</p>
<p>ReactJS is trying to solve this problem by using component-based development. </p>
<h1 id="What’s-a-component-in-reactjs"><a href="#What’s-a-component-in-reactjs" class="headerlink" title="What’s a component in reactjs?"></a>What’s a component in reactjs?</h1><p>As I mentioned above, how to reuse thing is one of purposes of React and component is the one which will be resued in react.</p>
<p>Function is the initial and basic idea in most of programme world when people don’t want to copy/paste pieces of codes around. I think generic functions will need a few parts in <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Von_Neumann_architecture">von neumann architecture</a></p>
<ul>
<li>input, </li>
<li>output,</li>
<li>control logic, how to react with input</li>
<li>local state, where the function can store middle computation result.</li>
</ul>
<p>In engineering, a function is interpreted as a specific process, action or task that a system is able to perform. </p>
<p>Not surprised that React will use similar idea. We can consider ReactJS as a system and a component as a function.</p>
<p>From <a target="_blank" rel="noopener" href="https://reactjs.org/tutorial/tutorial.html#what-is-react">reactjs offical website</a>, a component takes in parameters, called props (short for “properties”), and returns a hierarchy of views to display via the render method. The function is something similar as following. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Component A &#123;</span><br><span class="line">    render(props) &#123;</span><br><span class="line">        &#x2F;&#x2F; variables </span><br><span class="line">        &#x2F;&#x2F;... control logic</span><br><span class="line">        return htmlView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>input is called props<br>output is the result of render<br>logic is determined by render method</p>
<p>The above component we defined based on the definition cannot use any other information except the props we give it. We can do a lot of simple things with it, such as rendering a list with different names</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Component NameList &#123;</span><br><span class="line">    render(props) &#123;</span><br><span class="line">        return &lt;ul&gt;&lt;li&gt;props.name&lt;&#x2F;li&gt;&lt;&#x2F;ul&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactRenderEngine.render(NameList,&#123;props&#x3D;&#123;name:&quot;kai&quot;&#125;&#125;)</span><br><span class="line">ReactRenderEngine.render(NameList,&#123;props&#x3D;&#123;name:&quot;Erik&quot;&#125;&#125;)</span><br><span class="line">ReactRenderEngine.render(NameList,&#123;props&#x3D;&#123;name:&quot;Fabio&quot;&#125;&#125;)</span><br></pre></td></tr></table></figure>

<p>All of above is what we can imagine before going into real Reactjs implementation.</p>
<hr>
<p>In practice, React does similar implementation. It has a render engine <code>ReactDOM.render</code> to render a component into html dom structure. React introduces <a target="_blank" rel="noopener" href="https://reactjs.org/docs/rendering-elements.html">element</a> concept which is similar as html tags. The <a target="_blank" rel="noopener" href="https://reactjs.org/docs/components-and-props.html">component</a> specification is as following</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Definition function</span><br><span class="line">function Welcome(props) &#123;</span><br><span class="line">  return &lt;h1&gt;Hello, &#123;props.name&#125;&lt;&#x2F;h1&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ES6 Definition class</span><br><span class="line">class Welcome extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;&#x2F;h1&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;Welcome name&#x3D;&quot;Sara&quot; &#x2F;&gt;, document.getElementById(&#39;root&#39;))</span><br></pre></td></tr></table></figure>

<p>One important thing about react component is that * React component is not the same as a function in javascript* even though we can define it by a function. </p>
<p>A function is finished and forget by system once it’s returned. However, a component can have runtime states and keeps track its states until it’s deleted by React. A component can have states by setting this.state in their constructors.</p>
<p>I would like to compare react component with a function with a global variable.</p>
<pre><code>// javascript function with global variables
functionState=[]
function A() &#123;
    functionState[count]++;
    return &lt;div/&gt;
&#125;

// react component
class A extends React.Component &#123;
  constructor(props) &#123;
    super(props);
    this.state = &#123;count: 0&#125;;
  &#125;
  render() &#123;
    return (
      this.state.count++;
      return &lt;div/&gt;
    );
  &#125;
&#125;</code></pre>
<p>React is a framework to compose complex UIs from small and isolated pieces of code called “components”. It’s also a runtime to load, manage component states.</p>
<p>A component in react is a small service and it follows specific lifecycles.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kaichu.se/Reactjs/2019/10/17/concepts-before-starting-to-use-reactjs.html" data-id="ckuelnhos0006exoj29bg7xpf" class="article-share-link">Share</a>
      
        <a href="https://kaichu.se/Reactjs/2019/10/17/concepts-before-starting-to-use-reactjs.html#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/component/" rel="tag">component</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/frontend/" rel="tag">frontend</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/" rel="tag">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/reactjs/" rel="tag">reactjs</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-concepts-before-starting-to-use-ansible" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Ansible/2019/10/12/concepts-before-starting-to-use-ansible.html" class="article-date">
  <time datetime="2019-10-12T11:49:42.000Z" itemprop="datePublished">2019-10-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Ansible/">Ansible</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Ansible/2019/10/12/concepts-before-starting-to-use-ansible.html">Concepts before starting to use ansible</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I started to get involved into DevOps area since july of 2017. Jenkins, groovy and ssh are all my equipments to construct all the CI/CD pipeline realms. </p>
<p>I’ve heared a lot about Ansible since then but never get a determination to try it since I’m not sure what it is. Recently, I’m helping a team to build their CD pipeline. I think it’s a good time to use Ansible to do something. I start to get familier with the overview of the tool. In this post, I will give my opinions about those terms.</p>
<h2 id="What-is-Ansible"><a href="#What-is-Ansible" class="headerlink" title="What is Ansible"></a>What is Ansible</h2><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Ansible_(software)">Ansible</a> is an open-source software provisioning, configuration management, and application-deployment tool.</p>
<p>I think it’s a definition that’s hard to understand for most of the developers if they’re not working with operations. But most likely, they have worked with those tasks in a single machine.</p>
<ul>
<li>ssh into a server</li>
<li>install some missing libs or services (configuration management)</li>
<li>add user or group (software provisioning)</li>
<li>download a product (application-deployment)</li>
<li>change permissions (application-deployment)</li>
<li>start or stop a service (application-deployment)</li>
<li>change some configurations for nginx(configuration management)</li>
<li>…</li>
</ul>
<p>Nowadays, Infrastructure as code is geting more and more popular, an experience operation might be able to provision a single server, debug the whole infrastructure and operate on a single product, however, it’s impossible to manage a cluster of servers at the same time.</p>
<ul>
<li>Manage microsevices running on different servers and each of them requires different configurations. </li>
<li>Provision environments for testing, demo, staging and production.<br>When</li>
<li>Change open ports or load balancer configurations </li>
<li>…</li>
</ul>
<p>We do need a way to sit in a single host and shooting commands into different machines and it’s basically doing things as following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kube_clusters&#x3D;(server1 server2 server3 server4)</span><br><span class="line">for serverName in $kube_clusters</span><br><span class="line">  ssh -t username@serverName software_provision.sh </span><br><span class="line">  ssh -t username@serverName configuration_management.sh </span><br><span class="line">  ssh -t username@serverName application_deployment.sh </span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>Ansible is doing similar things but make the steps easier to understand and reusable in different systems. Ansible manages hosts by modeling all software packages, configs, and services as configurable resources. Via ssh, it transfers all tasks into remote servers and runs those tasks on the resources to bring them to the target state.</p>
<p><img src="/assets/Ansible_ov.jp2" alt="Ansible Usage Situation"></p>
<h2 id="Concepts-in-Ansbile"><a href="#Concepts-in-Ansbile" class="headerlink" title="Concepts in Ansbile"></a>Concepts in Ansbile</h2><p><a target="_blank" rel="noopener" href="https://www.ansible.com/overview/how-ansible-works">Ansible works</a> by connecting to your nodes and pushing out small programs, called “Ansible modules” to them. These programs are written to be resource models of the desired state of the system. Ansible then executes these modules (over SSH by default), and removes them when finished.</p>
<ul>
<li><p><strong>Ansible server</strong>: The machine where Ansible is installed and from which all tasks and playbooks will be ran. </p>
</li>
<li><p><strong>Module</strong>: A <a target="_blank" rel="noopener" href="https://docs.ansible.com/ansible/latest/user_guide/modules_intro.html">module</a> is units of codes executed directly on remote hosts. Ansible ships with a number of modules (called the ‘module library’). Modules can take args, return json values or notify other tasks.</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ping</span><br><span class="line">command -a &quot;&#x2F;sbin&#x2F;reboot -t now&quot;</span><br><span class="line">service -a &quot;name&#x3D;httpd state&#x3D;started&quot;</span><br></pre></td></tr></table></figure>
<p><em>-a to given arguments to ansible module</em></p>
<ul>
<li><strong>Inventory</strong>: A file contains groups and hosts to be managed. Ansible works against multiple systems in your infrastructure at the same time. Inventory provides a way to defined names for hosts and group similiar ones. Such as our above bash array name kube_clusters. Following inventory file is in <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/INI_file">INI format</a> used by ansible.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mail.example.com</span><br><span class="line"></span><br><span class="line">[webservers]</span><br><span class="line">foo.example.com</span><br><span class="line">bar.example.com</span><br><span class="line"></span><br><span class="line">[dbservers]</span><br><span class="line">one.example.com</span><br><span class="line">two.example.com</span><br><span class="line">three.example.com</span><br></pre></td></tr></table></figure>

<h2 id="Running-a-module-to-see-how-it-works"><a href="#Running-a-module-to-see-how-it-works" class="headerlink" title="Running a module to see how it works"></a>Running a module to see how it works</h2><p>There’re more concepts in ansbile which is not covered yet, such as playbooks, roles and so on. Let’s have a initial look at ansible command before next post is ready.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kaichu:~$ ansible localhost -m ping -a data&#x3D;helloansible</span><br><span class="line">localhost | SUCCESS &#x3D;&gt; &#123;</span><br><span class="line">    &quot;changed&quot;: false,</span><br><span class="line">    &quot;ping&quot;: &quot;helloansible&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In Ansible server where ansible is installed, we can use <code>ansible</code> to run a module <code>ping</code> with argument <code>data=helloansible</code> on a remote host <code>localhost</code> and see the returned result <code>Json format</code> in the console.</p>
<p>To understand the results of ping module, check following references, I will explain it in next post.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.ansible.com/ansible/latest/reference_appendices/common_return_values.html#changed">Common module return values in Ansible</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.ansible.com/ansible/latest/modules/ping_module.html">Module ping in Ansible</a></li>
</ul>
<p>Good references to distinguish provisioning and configuration management.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.thoughtworks.com/insights/blog/why-configuration-management-and-provisioning-are-different">Why configuration management and provisioning are different</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ibm.com/cloud/blog/end-to-end-application-provisioning-with-ansible-and-terraform">End to end application provisioning with ansible and terraform</a></li>
</ul>
<p>To have a overview about ansible, check the official explanation.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.ansible.com/overview/how-ansible-works">How ansible works</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.ansible.com/ansible/latest/modules">All modules in ansible core</a></li>
</ul>
<hr>
<p>In the comming posts, I will introduce how to start with ansible and play some common modules to make you used to it. </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kaichu.se/Ansible/2019/10/12/concepts-before-starting-to-use-ansible.html" data-id="ckuelnhoq0005exoj6mnxajf3" class="article-share-link">Share</a>
      
        <a href="https://kaichu.se/Ansible/2019/10/12/concepts-before-starting-to-use-ansible.html#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ansible/" rel="tag">ansible</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/devops/" rel="tag">devops</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-simple-bash-to-create-a-blog-in-jekyll-minima" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Site/2019/09/21/simple-bash-to-create-a-blog-in-jekyll-minima.html" class="article-date">
  <time datetime="2019-09-21T12:56:34.000Z" itemprop="datePublished">2019-09-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Site/">Site</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Site/2019/09/21/simple-bash-to-create-a-blog-in-jekyll-minima.html">Simple bash to create a blog in jekyll minima</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Just start to use Jekyll to manage my personal blog, not sure if there’s a tool to create a blog in the basice theme minima, to make my life easier, I decide to add a simple bash scripts to add a post easily.</p>
<p>Steps to create a post in minima:</p>
<ol>
<li>Add a file in _posts folder</li>
<li>Name the file with YYYY-MM-DD-my-title-is-here.markdown</li>
<li>Copy paste the front matter from an old blog </li>
<li>Change the title of to “My title is here”</li>
<li>Change the date and time </li>
<li>Start to think about my content</li>
</ol>
<p>I think a basic bash will save my life and it’s worthy to add it, what I want the script to do is receiving a a list of words, finishing all above steps and generating a file with basic front matter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;new.sh my title is here</span><br></pre></td></tr></table></figure>

<h1 id="Date-and-time"><a href="#Date-and-time" class="headerlink" title="Date and time"></a>Date and time</h1><p>We need a time format <code>2019-09-21 14:56:34 +0200</code> in the blog front matter, which can be generated using following bash date command</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blogDate&#x3D;&#96;date &quot;+%F %T %z&quot;&#96;</span><br></pre></td></tr></table></figure>
<p>We need a date format <code>2019-09-21</code> which is also easy in bash, %F is refered by this <a target="_blank" rel="noopener" href="https://www.tutorialkart.com/bash-shell-scripting/bash-date-format-options-examples/">turorial</a> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filedate&#x3D;&#96;date +%F&#96;</span><br></pre></td></tr></table></figure>

<h1 id="Title-and-filename"><a href="#Title-and-filename" class="headerlink" title="Title and filename"></a>Title and filename</h1><p>The input from the command will be all the words of the title. To generate a blog file, we need to convert all letters into lower case and add a hyphen in between, which is quite easy to be done by <code>tr</code> <a target="_blank" rel="noopener" href="https://ss64.com/bash/tr.html">command</a> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lowcase&#x3D;$( echo $title | tr &#39;[A-Z]&#39; &#39;[a-z]&#39;)</span><br><span class="line">formatTitle&#x3D;$( echo $lowcase | tr &#39;[[:blank:]]&#39; &#39;-&#39; )</span><br></pre></td></tr></table></figure>

<p>However, in bash 3, seems we don’t have a good choice to make the first letter of a string upper case and welcome anyone to give me a suggest if you konw. I agree with <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/12487424/uppercase-first-character-in-a-variable-with-bash">Michael’s suggestion</a> in stackoverflow and using following way to archive it. Basically, get the first letter in the string by using <a target="_blank" rel="noopener" href="https://www.tldp.org/LDP/abs/html/string-manipulation.html">string manipulation</a> and replace it with upper case. Then we combine it with the rest of other charaters in the string.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blogTitle&#x3D;&quot;$( echo $&#123;lowcase:0:1&#125; | tr &#39;[a-z]&#39; &#39;[A-Z]&#39; )$&#123;lowcase:1&#125;&quot;</span><br></pre></td></tr></table></figure>

<p>Then we can create the file and output the front matter with <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Here_document">here document</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Create a file with the filename</span><br><span class="line">touch $filename</span><br><span class="line"></span><br><span class="line"># Add some common front matter</span><br><span class="line">cat &gt; $filename &lt;&lt; EOF</span><br><span class="line">---</span><br><span class="line">layout: post</span><br><span class="line">title:  &quot;$&#123;blogTitle&#125;&quot;</span><br><span class="line">date:   $blogDate</span><br><span class="line">categories: </span><br><span class="line">---</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h2 id="To-generate-a-new-post"><a href="#To-generate-a-new-post" class="headerlink" title="To generate a new post"></a>To generate a new post</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd _posts&#x2F;</span><br><span class="line">$ .&#x2F;new.sh my new post idea is ready</span><br><span class="line">## &gt; 2019-09-21-my-new-post-idea-is-ready.markdown has be generated</span><br></pre></td></tr></table></figure>
<p><img src="/assets/bashnewblog.png" alt="The result of the bash scripts"></p>
<p><a target="_blank" rel="noopener" href="https://github.com/kai-chu/kai-chu.github.io/tree/master/_posts/new.sh">Script source file</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kaichu.se/Site/2019/09/21/simple-bash-to-create-a-blog-in-jekyll-minima.html" data-id="ckuelnhon0002exoj18dx8th3" class="article-share-link">Share</a>
      
        <a href="https://kaichu.se/Site/2019/09/21/simple-bash-to-create-a-blog-in-jekyll-minima.html#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bash/" rel="tag">bash</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/" rel="tag">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tools/" rel="tag">tools</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-welcome-my-site" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Site/2019/09/20/welcome-my-site.html" class="article-date">
  <time datetime="2019-09-20T16:28:39.000Z" itemprop="datePublished">2019-09-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Site/">Site</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/Site/2019/09/20/welcome-my-site.html">Welcome to my site!</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I used to document things in two google docs, one of them is called engineering handbook and the other is programming handbook.<br>I think I need to share my ideas and experiences so that someone can find it and solve their problems. And also I need to learn some experiences from others.</p>
<p>You’ll find out a lot of topics in this website since I’m working as Developer, DevOps and fullstack CTO of <a target="_blank" rel="noopener" href="http://foodla.nu/">Foodla AB</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kaichu.se/Site/2019/09/20/welcome-my-site.html" data-id="ckuelnhom0001exojgj4c73ka" class="article-share-link">Share</a>
      
        <a href="https://kaichu.se/Site/2019/09/20/welcome-my-site.html#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/" rel="tag">blog</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/site/" rel="tag">site</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/Gatling/2021/10/05/How-to-save-variables-in-session-or-query-results-into-files-in-gatling.html">- How to save variables in gatling session or query results into files</a>
          </li>
        
          <li>
            <a href="/Docker/2021/04/18/Setup-two-stages-of-Dockerfile-to-build-a-nodejs-app.html">- Setup two stages of Dockerfile to build a nodejs app</a>
          </li>
        
          <li>
            <a href="/Ansible/2020/09/23/Ansible-built-in-module-with-items.html">- Ansible built-in module - with_items</a>
          </li>
        
          <li>
            <a href="/Kubernetes/2020/09/21/Kubernetes-02-the-3-practical-ways-to-use-k8s-secret.html">- Kubernetes - 02 - the 3 practical ways to use k8s secret</a>
          </li>
        
          <li>
            <a href="/Kubernetes/2020/09/19/kubernetes-01-the-3-practical-ways-to-create-k8s-secret.html">- Kubernetes - 01 - the 3 practical ways to create k8s secret</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Airflow/">Airflow</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ansible/">Ansible</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Gatling/">Gatling</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kubernetes/">Kubernetes</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nodejs/">Nodejs</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Rancher/">Rancher</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Reactjs/">Reactjs</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Site/">Site</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Airflow/" style="font-size: 20px;">Airflow</a> <a href="/tags/Ansible/" style="font-size: 12.5px;">Ansible</a> <a href="/tags/Architecture/" style="font-size: 12.5px;">Architecture</a> <a href="/tags/Authentication/" style="font-size: 10px;">Authentication</a> <a href="/tags/Bigdata/" style="font-size: 17.5px;">Bigdata</a> <a href="/tags/Datalake/" style="font-size: 12.5px;">Datalake</a> <a href="/tags/DevOps/" style="font-size: 12.5px;">DevOps</a> <a href="/tags/Docker/" style="font-size: 12.5px;">Docker</a> <a href="/tags/Gatling/" style="font-size: 10px;">Gatling</a> <a href="/tags/Isomorphic/" style="font-size: 10px;">Isomorphic</a> <a href="/tags/Jinja2/" style="font-size: 12.5px;">Jinja2</a> <a href="/tags/Loadtest/" style="font-size: 10px;">Loadtest</a> <a href="/tags/Nodejs/" style="font-size: 10px;">Nodejs</a> <a href="/tags/Openldap/" style="font-size: 10px;">Openldap</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/SPA/" style="font-size: 10px;">SPA</a> <a href="/tags/Template/" style="font-size: 10px;">Template</a> <a href="/tags/ansible/" style="font-size: 15px;">ansible</a> <a href="/tags/ansible-playbook/" style="font-size: 10px;">ansible-playbook</a> <a href="/tags/ansible-roles/" style="font-size: 10px;">ansible-roles</a> <a href="/tags/ansible-tasks/" style="font-size: 10px;">ansible-tasks</a> <a href="/tags/backup/" style="font-size: 10px;">backup</a> <a href="/tags/bash/" style="font-size: 10px;">bash</a> <a href="/tags/bigdata/" style="font-size: 12.5px;">bigdata</a> <a href="/tags/blog/" style="font-size: 12.5px;">blog</a> <a href="/tags/cloud/" style="font-size: 10px;">cloud</a> <a href="/tags/component/" style="font-size: 10px;">component</a> <a href="/tags/datalake/" style="font-size: 10px;">datalake</a> <a href="/tags/devops/" style="font-size: 12.5px;">devops</a> <a href="/tags/event-loop/" style="font-size: 10px;">event loop</a> <a href="/tags/frontend/" style="font-size: 12.5px;">frontend</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/hypervisors/" style="font-size: 10px;">hypervisors</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/jinja/" style="font-size: 10px;">jinja</a> <a href="/tags/k8s/" style="font-size: 12.5px;">k8s</a> <a href="/tags/kvm/" style="font-size: 10px;">kvm</a> <a href="/tags/nodejs/" style="font-size: 12.5px;">nodejs</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/qemu/" style="font-size: 10px;">qemu</a> <a href="/tags/rancher/" style="font-size: 10px;">rancher</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/reactjs/" style="font-size: 10px;">reactjs</a> <a href="/tags/scheduler/" style="font-size: 10px;">scheduler</a> <a href="/tags/secret/" style="font-size: 12.5px;">secret</a> <a href="/tags/setImmediate/" style="font-size: 10px;">setImmediate</a> <a href="/tags/setTimeout/" style="font-size: 10px;">setTimeout</a> <a href="/tags/site/" style="font-size: 10px;">site</a> <a href="/tags/starter/" style="font-size: 10px;">starter</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a> <a href="/tags/virtulization/" style="font-size: 10px;">virtulization</a>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 Kai Chu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'kaichu-se';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>